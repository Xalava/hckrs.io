<template name="admin_growth">
  <div id="admin_growth" class="page">

    {{#if composeActive}}
      {{> admin_growthEmail city=city}}
    {{/if}}

    <div class="pull-right" style="text-align:right;">
      <button class="btn" action="crawl">crawl "{{city.name}}"</button>
      <button class="btn" action="compose">compose email</button>
      <br/><em>Crawler will fetch only 100 users per minute.</em>
    </div>

    <h2>Github users {{city.name}}</h2>
    <div id="growthCityChooser">
      {{> citySelect city=city.key}}
    </div>
    {{> reactiveTable collection=collection settings=settings}}
    <div class="page-space"></div>
  </div>
</template>



<template name="admin_growthEmail">
  <div id="admin_growthEmail">

    <h2>Send Email</h2>
    {{#autoForm id="adminGrowthEmailForm" schema=schema class="compose"}}

      <div class="form-group"> 
        Send to <input type="number" name="number" style="width: 60px;" value="20"> uninvited people occuring at the top of the list. Click on a column to change the order.
      </div>
      
      <div class="form-group">
        <strong>From: {{../city.key}}@hckrs.io</strong>
      </div>

      {{> afQuickField name="selectSubject" id="selectSubject" class="input-xxlarge" options=subjects firstOption="New subject template"}}
      {{> afFieldInput name="subject" id="subject" class="input-xxlarge" value=subject.value readonly=subject.readonly}}
      
      {{> afQuickField name="selectBody" id="selectBody" rows="10" class="input-xxlarge" options=bodies firstOption="New body template"}}
      {{> afFieldInput name="body" id="body" rows="10" class="input-xxlarge" value=body.value readonly=body.readonly}}
      
      <br/>
      <button action="submit" class="btn btn-primary">Send</button>
    {{/autoForm}}
    
  </div>
</template>

