<template name="admin_emailTemplates">
  <div id="admin_emailTemplates" class="page">
   
    {{> reactiveTable collection=collection settings=settings}}
    
    <div class="page-space"></div>
    
    {{#autoForm collection="EmailTemplates" id="adminEmailTemplatesForm" doc=doc type=type}}
      {{#if equals type "insert"}}
        <h2>Add new Templates</h2>
      {{else}}
        <h2>
          Update Template / 
          <button action="new-template" class="btn">New Template</button>
        </h2>
      {{/if}}
      <div class="row">
        <div class="col-lg-4">  
          {{> afQuickField name="usedIn" id="usedIn" options=usedInOptions}}
          {{#if equals type "insert"}}
            {{> afQuickField name="identifier" id="identifier"}}
          {{/if}}
        </div>
        <div class="col-lg-8">
          {{#if vars}}
            <strong>variables</strong>
            <p>
              {{#each vars}}
                *|{{name}}|* &nbsp;&nbsp;
              {{/each}}
            </p>
            <p>How to use variable <a href="http://help.mandrill.com/entries/28427818-Can-I-use-dynamic-or-conditional-merge-tags-" target="_blank">if-then-else</a> construction?</p>
          {{/if}}
        </div>
      </div>
      <div class="row">
        <div class="col-lg-7">
          {{> afQuickField name="subject" id="subject"}}
          {{> afQuickField name="body" id="body" rows="6"}}
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Submit</button>
      <button type="button" action="preview" class="btn">Send me preview</button>
    {{/autoForm}}
  </div>
</template>

