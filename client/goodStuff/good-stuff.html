<template name="goodStuff">
  <div id="goodStuff">
  	{{#if Session 'newGoodStuffItem'}}
	  	{{> newGoodStuffItem}}
  	{{/if}}
  	{{> goodStuffGrid}}
  </div>
</template>

<template name="goodStuffGrid">
	<div id="goodStuffGrid" class="page">
		{{> pasteDroplet}}
		<div id="goodStuffMasonry">
	  	{{#each goodStuff}}
		  	{{> goodStuffItem}}
		 	{{/each}}
		</div>
	</div>
</template>

<template name="pasteDroplet">
	<div id="pasteDroplet">
		<div class="on-inactive">
			Focus this block to add a new item
		</div>
		<div class="on-active hide">
			Paste an URL (cmd + v)
			<input type="text" id="goodStuffPasteUrl" />
		</div>
	</div>
</template>

<template name="goodStuffItem">
	<div class="item {{active}}" style="background-image:url({{imageUrl}});">
		<a href="{{website}}" target="_blank" class="item-overlay" style="background-color: rgba({{color.r}}, {{color.g}}, {{color.b}}, 0.85);">
			<img src="img/icon-article.svg" title="product" class="icon" />
  			{{#if userId}}
		  		<div class="user">
		  			{{#with relatedUser userId}}
		  			<a href="{{pathFor 'hacker'}}" class="hackers-name">
			  			<div style="background-image:url({{profile.picture}});" class="pictureView small" style="cursor: pointer;"></div>
			  		</a>
			  		{{/with}}
		  		</div>
			{{/if}}	
			<div class="item-content">
	  			<div class="title">{{title}}</div>
	  			{{#if costs}}
	  			<div class="price">{{Currency costs}}</div>
	  			{{/if}}
	  			<div class="subtitle">{{subtitle}}</div>
	  			<div class="event">
	  				<span class="event-location">{{eventLocation}}</span>
	  				<span class="event-date">{{Calendar eventDate}}</span>
	  			</div>
  		</div>
		</a>
 	</div>
</template>

<template name="newGoodStuffItem">
	<div id="newGoodStuffItem">
		<div class="container">
			
			<a href="#" class="cancel close-button">&times;</a>

			{{#with previewItem}}
			<form id="newGoodStuffItemForm">
			
        <div class="url">
          <a href="{{website}}" target="_blank">{{website}}</a>
        </div>

				<div class="preview">
					<a href="#" class="arrow-left">&lt;</a>
					{{> goodStuffItem}}
					<a href="#" class="arrow-right">&gt;</a>
				</div>

				<div class="details">
					<input type="text" name="title" id="gs_title" value="{{title}}" placeholder="title"><br/>
					<input type="text" name="subtitle" value="{{subtitle}}"  id="gs_subtitle" placeholder="subtitle">
				</div>

        <div class="tags">
          <div class="hacking">
            {{#each hackingTypes}}
              <span class="tag {{activeTag 'hacking'}}" data-type="hacking" data-tag="{{this}}">{{this}}</span>
            {{/each}}
          </div>
          <div class="types">
            {{#each itemTypes}}
              <span class="tag {{activeTag 'types'}}" data-type="types" data-tag="{{this}}">{{this}}</span>
            {{/each}}
          </div>
          <div class="tags">
            {{#each keywords}}
              <span class="tag {{activeTag 'keywords'}}" data-type="keywords" data-tag="{{this}}">{{this}}</span>
            {{/each}}
          </div>
        </div>

				<div class="footer">
					<button class="btn cancel">Cancel</button>
					<button class="btn btn-success" type="submit">Add</button>
				</div>

			</form>	
			{{/with}}	

		</div>
	</div>
</template>
