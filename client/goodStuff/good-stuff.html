<template name="goodStuff">
  <div id="goodStuff">
  	{{#if Session 'newGoodStuffItem'}}
	  	{{> newGoodStuffItem}}
  	{{/if}}
  	{{> goodStuffGrid}}
  </div>
</template>

<template name="goodStuffGrid">
	<div id="goodStuffGrid" class="page">
		<div id="goodStuffMasonry">
      {{> pasteDroplet}}
	  	{{#each goodStuff}}
		  	{{> goodStuffItem}}
		 	{{/each}}
		</div>
	</div>
</template>

<template name="pasteDroplet">
	<div id="pasteDroplet" class="item">
		<div class="on-inactive">
			Click here to<br/>add a new item
		</div>
		<div class="on-active hide">
      <br/>share a URL — <strong>{{#if equals OS 'Mac'}}&#8984;V{{else}}CTRL+V{{/if}}</strong>
		  <!--<br/>—<br/><a href="#" id="ask">ask a question</a>-->
      <input type="text" id="goodStuffPasteUrl" />
		</div>
	</div>
</template>

<template name="goodStuffItem">
	<div class="item {{active}}">

    <img src="{{imageUrl}}" class="image" alt="" />

    <img src="img/icon-{{itemType}}.svg" title="{{itemType}}" class="type-icon" />

		<a href="{{website}}" target="_blank" class="item-overlay" style="background-color: rgba({{color.r}}, {{color.g}}, {{color.b}}, 0.85);">
			<div class="item-content">
  			<div class="title">{{title}}</div>
  			{{#if costs}}
  			<div class="price">{{Currency costs}}</div>
  			{{/if}}
  			<div class="subtitle">{{subtitle}}</div>
  			<div class="event">
  				<span class="event-location">{{eventLocation}}</span>
  				<span class="event-date">{{Calendar eventDate}}</span>
  			</div>
        <div class="user">
          {{#with relatedUser userId}}
          <a href="{{pathFor 'hacker'}}" class="pictureView-wrapper">
            <div style="background-image:url({{profile.picture}});" class="pictureView mini clickable"></div>
          </a>
          {{/with}}
        </div>
  		</div>
		</a>

 	</div>
</template>

<template name="newGoodStuffItem">
	<div id="newGoodStuffItem">
		<div class="container">

			<a href="#" class="cancel close-button">&times;</a>

			{{#with previewItem}}
			<form id="newGoodStuffItemForm">

        <div class="url top">
          <a href="{{website}}" target="_blank">{{website}}</a>
        </div>

        <div class="details">
          <input type="text" class="input" name="title" id="gs_title" value="{{title}}" placeholder="title">
          <input type="text" class="input" style="margin-left:6px;" name="subtitle" id="gs_subtitle" value="{{subtitle}}" placeholder="subtitle">
        </div>

				<div class="preview">
					<a href="#" class="arrow-left"><img src="/img/icon-arrow-left.svg" /></a>
					{{> goodStuffItem}}
					<a href="#" class="arrow-right"><img src="/img/icon-arrow-right.svg" /></a>

				</div>

        <div class="tags">
          <div class="title">Subject</div>
          <div class="hacking">
            {{#each hackingTypes}}
              <span class="tag {{activeTag 'hacking'}}" data-type="hacking" data-tag="{{this}}">{{this}}</span>
            {{/each}}
          </div>
          <div class="title">Type</div>
          <div class="types">
            {{#each itemTypes}}
              <span class="tag {{activeTag 'types'}}" data-type="types" data-tag="{{this}}">{{this}}</span>
            {{/each}}
          </div>
          <div class="title">Tags</div>
          <div class="tags">
            {{#each keywords}}
              <span class="tag {{activeTag 'keywords'}}" data-type="keywords" data-tag="{{this}}">{{this}}</span>
            {{/each}}
          </div>
        </div>

				<div class="footer">
					<button class="btn" type="submit">Share <small>[{{#if equals OS 'Mac'}}enter{{else}}return{{/if}}]</small></button>
				</div>

			</form>
			{{/with}}

		</div>
	</div>
</template>
