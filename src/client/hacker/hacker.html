
<template name="hacker">
  {{! view a hacker's profile and include editing functionality when visiting your own profile }}

  {{#if hacker._id _currentUser._id}}
    {{> hackerEdit}}
  {{else}}
    {{> hackerView}}
  {{/if}}
</template>

<template name="hackerEdit">
  <h3>My Profile</h3>
  <div class="row row-fluid">
    
    <div class="span6">
      {{#isolate}}
      {{#with hacker}}
      <dl>
        <dt>picture</dt>
        <dd><img src="{{profile.picture}}" class="picture" alt="" /></dd>

        <dt>name</dt>
        <dd><input type="text" name="profile.name" class="text save" value="{{profile.name}}" placeholder="full name" /></dd>

        <dt>city</dt>
        <dd><input type="text" name="profile.city" class="text save" value="{{profile.city}}" placeholder="city" /></dd>

        <dt>language</dt>
        <dd><input type="text" name="profile.lang" class="text save" value="{{profile.lang}}" maxlength="2" style="width: 20px;" placeholder="EN" /></dd>

        <dt>e-mailaddresses</dt>
        <dd>
          {{#each emails}}
            <a href="mailto:{{address}}">{{address}}</a><br/>
          {{/each}}
        </dd>

        <dt>facebook</dt>
        <dd>
          {{#if profile.social.facebook}}
            <a href="{{profile.social.facebook}}" target="_blank">{{profile.social.facebook}}</a>
          {{else}}
            <a href="#" id="addFacebookButton">add facebook</a>
          {{/if}}
        </dd>

        <dt>github</dt>
        <dd>
          {{#if profile.social.github}}
            <a href="{{profile.social.github}}" target="_blank">{{profile.social.github}}</a>
          {{else}}
            <a href="#" id="addGithubButton">add github</a>
          {{/if}}
        </dd>

        <dt>twitter</dt>
        <dd>
          {{#if profile.social.twitter}}
            <a href="{{profile.social.twitter}}" target="_blank">{{profile.social.twitter}}</a>
          {{else}}
            <a href="#" id="addTwitterButton">add twitter</a>
          {{/if}}
        </dd>
      </dl>
      {{/with}}
      {{/isolate}}
    </div>

    <div class="span6">
      {{> editSkills}}
    </div>

  </div>
</template>

<template name="hackerView">
  <h3>Profile of {{profile.name}}</h3>
  <div class="row row-fluid">

    <div class="span6">
      {{#with hacker}}
      <dl style="text-align:left;">
        <dt>picture</dt>
        <dd><a href="{{pathFor 'hacker'}}" class=""><div class="hacker-circle" style="background: url({{profile.picture}}) no-repeat;"><img src="{{profile.picture}}" class="hacker-picture" alt="{{profile.name}}" /></div></a></dd>

        <dt>name</dt>
        <dd>{{profile.name}}</dd>

        <dt>city</dt>
        <dd>{{profile.city}}</dd>

        <dt>language</dt>
        <dd>{{profile.lang}}</dd>

        <dt>e-mailaddresses</dt>
        <dd>
          {{#each emails}}
            <a href="mailto:{{address}}">{{address}}</a><br/>
          {{/each}}
        </dd>

        <dt>facebook</dt>
        <dd>
          {{#if profile.social.facebook}}
            <a href="{{profile.social.facebook}}" target="_blank">{{profile.social.facebook}}</a>
          {{else}}
            <a href="#" id="addFacebookButton">add facebook</a>
          {{/if}}
        </dd>

        <dt>github</dt>
        <dd>
          {{#if profile.social.github}}
            <a href="{{profile.social.github}}" target="_blank">{{profile.social.github}}</a>
          {{else}}
            <a href="#" id="addGithubButton">add github</a>
          {{/if}}
        </dd>

        <dt>twitter</dt>
        <dd>
          {{#if profile.social.twitter}}
            <a href="{{profile.social.twitter}}" target="_blank">{{profile.social.twitter}}</a>
          {{else}}
            <a href="#" id="addTwitterButton">add twitter</a>
          {{/if}}
        </dd>
      </dl>
      {{/with}}
    </div>

    <div class="span6">
      {{> skills}}
    </div>

  </div>
</template>
