
<template name="hacker">
  {{! view a hacker's profile and include editing functionality when visiting your own profile }}

  {{#with hacker}}
    {{#if hackerIsCurrentUser}}
      {{> hackerEdit}}
    {{else}}
      {{> hackerView}}
    {{/if}}
  {{/with}}
</template>

<template name="hackerEdit">
  <h3>Profile of {{profile.name}}</h3>
  <div id="hacker" class="row row-fluid">
    <div class="span6">


      
      <form class="form-horizontal">

        <div id="profilePicture">
          <div class="current-picture">
            <div class="change hide">change</div>
            {{#constant}}
              <img src="{{profile.picture}}" class="picture" alt="" />
            {{/constant}}
          </div>
          <div class="picture-choser {{dynamicClass 'pictureChoser'}}" id="pictureChoser">
            {{#with profile.socialPicture}}
              {{#if facebook}}
                <label for="inputPictureFacebook" class="radio">
                  <img src="{{facebook}}" class="picture" alt="" />    
                  <div class="label-text">
                    <input type="radio" name="picture" value="{{facebook}}" id="inputPictureFacebook" {{selected facebook}} />
                    Facebook
                  </div>
                </label>
              {{/if}}
              {{#if twitter}}
                <label for="inputPictureTwitter" class="radio">
                  <img src="{{twitter}}" class="picture" alt="" />    
                  <div class="label-text">
                    <input type="radio" name="picture" value="{{twitter}}" id="inputPictureTwitter" {{selected twitter}} />
                    Twitter
                  </div>
                </label>
              {{/if}}
              {{#if github}}
                <label for="inputPictureGithub" class="radio">
                  <img src="{{github}}" class="picture" alt="" />    
                  <div class="label-text">
                    <input type="radio" name="picture" value="{{github}}" id="inputPictureGithub" {{selected github}} />
                    Github
                  </div>
                </label>
              {{/if}}
            {{/with}}
            <div class="clear"></div>
          </div>
        </div>
    
        <div class="control-group">
          <label class="control-label">Type of hacker</label>
          <div class="controls">
            <label for="inputClassLife" class="checkbox">
              <input type="checkbox" name="class" id="inputClassLife" data-type="life" {{classChecked "life"}} />
              Life hacker
            </label>
            <label for="inputClassHardware" class="checkbox">
              <input type="checkbox" name="class" id="inputClassHardware" data-type="hardware" {{classChecked "hardware"}} />
              Hardware hacker
            </label>
            <label for="inputClassDesign" class="checkbox">
              <input type="checkbox" name="class" id="inputClassDesign" data-type="design" {{classChecked "design"}} />
              Design hacker
            </label>
            <label for="inputClassSoftware" class="checkbox">
              <input type="checkbox" name="class" id="inputClassSoftware" data-type="software" {{classChecked "software"}} />
              Software hacker
            </label>
            <label for="inputClassWeb" class="checkbox">
              <input type="checkbox" name="class" id="inputClassWeb" data-type="web" {{classChecked "web"}} />
              Web hacker
            </label>
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="inputHomepage">Homepage</label>
          <div class="controls">
            <input type="text" name="homepage" data-field="profile.homepage" class="text save {{dynamicClass 'inputHomepage'}}" value="{{profile.homepage}}" placeholder="http://" id="inputHomepage" />
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="inputName">Name</label>
          <div class="controls">
            <input type="text" name="name" data-field="profile.name" class="text save {{dynamicClass 'inputName'}}" value="{{profile.name}}" placeholder="full name" id="inputName" />
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="inputEmail">Email</label>
          <div class="controls">
            <input type="email" name="email" data-field="profile.email" class="text save {{dynamicClass 'inputEmail'}}" value="{{profile.email}}" placeholder="e-mailaddress" id="inputEmail" />
          </div>
        </div>
        <div class="control-group">
          <label class="control-label">Address</label>
          <div class="controls">
              <div id="mapWrapper"> 
                {{#constant}}
                <div id="map"></div>
                {{/constant}}  
              </div>
          </div>
        </div>
  
        <div class="control-group">
          <label class="control-label">Facebook</label>
          <div class="controls">
            {{#if profile.social.facebook}}
              <a href="{{profile.social.facebook}}" target="_blank">{{profile.social.facebook}}</a>
            {{else}}
              <a href="#" id="addFacebookButton">add facebook</a>
            {{/if}}
          </div>
        </div>
        <div class="control-group">
          <label class="control-label">Github</label>
          <div class="controls">
            {{#if profile.social.github}}
              <a href="{{profile.social.github}}" target="_blank">{{profile.social.github}}</a>
            {{else}}
              <a href="#" id="addGithubButton">add github</a>
            {{/if}}
          </div>
        </div>
        <div class="control-group">
          <label class="control-label">Twitter</label>
          <div class="controls">
            {{#if profile.social.twitter}}
              <a href="{{profile.social.twitter}}" target="_blank">{{profile.social.twitter}}</a>
            {{else}}
              <a href="#" id="addTwitterButton">add twitter</a>
            {{/if}}
          </div>
        </div>

      </form>
    
    </div>
    <div class="span6">
      {{> editSkills}}
    </div>

  </div>
</template>

<template name="hackerView">
  <h3>Profile of {{profile.name}}</h3>
  <div id="hacker" class="row row-fluid">

    <div class="span6">
      <dl style="text-align:left;">
        <dt>picture</dt>
        <dd><a href="{{pathFor 'hacker'}}"><img src="{{profile.picture}}" class="hacker-picture" alt="{{profile.name}}" /></a></dd>

        <dt>name</dt>
        <dd>{{profile.name}}</dd>

        {{#if profile.homepage}}
          <dt>homepage</dt>
          <dd><a href="{{profile.homepage}}" target="_blank">{{profile.homepage}}</a></dd>
        {{/if}}

        {{#if profile.classes}}
          <dt>type of hacker</dt>
          <dd>
            {{#each profile.classes}}
              <span>{{this}}</span>
            {{/each}}
          </dd>
        {{/if}}

        {{#if profile.social.facebook}}
          <dt>facebook</dt>
          <dd>
            <a href="{{profile.social.facebook}}" target="_blank">{{profile.social.facebook}}</a>
          </dd>
        {{/if}}

        {{#if profile.social.github}}
          <dt>github</dt>
          <dd>
            <a href="{{profile.social.github}}" target="_blank">{{profile.social.github}}</a>
          </dd>
        {{/if}}

        {{#if profile.social.twitter}}
          <dt>twitter</dt>
          <dd>
            <a href="{{profile.social.twitter}}" target="_blank">{{profile.social.twitter}}</a>
          </dd>
        {{/if}}
      </dl>
    </div>

    <div class="span6">
      {{> skills}}
    </div>

  </div>
</template>
