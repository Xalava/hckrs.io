<head>
  <title>Hackers Welcome</title>
  <meta name="title" content="Hackers Welcome" />
  <meta name="description" content="Community of hackers [dev, design & hardware] in your city." />
  <meta content="http://www.HackersWelcome.com" property="og:url" />
  <!--
    <meta content="" property="og:image" />
    <link rel="shortcut icon" id="favicon" href="favicon.png"> 
  -->
  <meta name="author" content="Toon van Ramshorst &amp; Jarno Le Conté">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>
</head>

<body>
  {{> main}}
</body>

<template name="main">
  <div class="wrapper">
    <div class="main">
      {{> header}}
      <div class="content">
        {{renderRouter}}
      </div>
    </div>
  </div>
</template>


<template name="header">
  {{#unless loggedIn}}
    <div class="a">
      <div style="position:absolute;top: 0px;z-index:11;">
        <a href="#" id="signupWithFacebook">Signup with Facebook</a> |
        <a href="#" id="signupWithGithub">Signup with Github</a> |
        <a href="#" id="signupWithTwitter">Signup with Twitter</a>
      </div>
      <a href="{{pathFor 'frontpage'}}"><img src="/img/hackers-welcome.png" alt="Hackers Welcome" class="logo"></a>
      <a href="#"><img src="/img/facebook-connect.png" alt="Facebook Connect" class="facebook-connect"></a>
    </div>
  {{else}}
    <div class="header">
      <a href="{{pathFor 'frontpage'}}"><img src="/img/hackers-welcome.png" alt="Hackers Welcome" height="69" width="399" class="logo"></a>
      <div class="menu">
        <a href="{{pathFor 'hackers'}}">hackers</a> •
        {{#with _currentUser}}
          <a href="{{pathFor 'hacker'}}">profile</a>
        {{/with}}
      </div>
      <a href="#" id="signOutButton" style="position:absolute;top: 0px;right: 0px;">SignOut</a>
    </div>
  {{/unless}}
</template>


<template name="frontpage">
  <div id="frontpage">
    <H1>Lyon has <b>{{totalHackers}}</b> hackers.<br>Are you a <b><span id="target"></span><span id="cursor"></span></b> hacker?</H1>
  </div>
</template>

<template name="hackers">
  <h3>List of hackers</h3>
 
  {{#each hackers}}
  <div class="hacker" style="border:1px solid gray;float:left;">
    <a href="{{pathFor 'hacker'}}"><img src="{{profile.picture}}" class="hackers-picture" alt="" /></a>
    <a href="{{pathFor 'hacker'}}" class="hackers-name">{{profile.name}}</a>
    <!--<div class="age">{{profile.age}}</div>-->
    {{#if profile.social.facebook}}
      <a href="{{profile.social.facebook}}" class="hackers-social social-facebook" target="_blank">Facebook</a>
    {{/if}}
    {{#if profile.social.github}}
      <a href="{{profile.social.github}}" class="hackers-social social-github" target="_blank">Github</a>
    {{/if}}
    {{#if profile.social.twitter}}
      <a href="{{profile.social.twitter}}" class="hackers-social social-twitter" target="_blank">Twitter</a>
    {{/if}}
  </div>
  {{/each}}
 
  <div style="clear:both;"></div>
</template>


<template name="hacker">
  {{#with hacker}}
    <h3>Profile of {{profile.name}}</h3>

    {{#if equals hacker._id _currentUser._id}}
      (<a href="{{pathFor 'edit'}}">edit</a>)
    {{/if}}

    <div class="row row-fluid">
      <div class="span6">
        <dl style="text-align:left;">
          <dt>picture</dt>
          <dd><img src="{{profile.picture}}" class="picture" alt="" /></dd>

          <dt>name</dt>
          <dd>{{profile.name}}</dd>

          <dt>city</dt>
          <dd>{{profile.city}}</dd>

          <dt>language</dt>
          <dd>{{profile.lang}}</dd>

          <dt>e-mailaddresses</dt>
          <dd>
            {{#each emails}}
              <a href="mailto:{{address}}">{{address}}</a><br/>
            {{/each}}
          </dd>

          <dt>facebook</dt>
          <dd>
            {{#if profile.social.facebook}}
              <a href="{{profile.social.facebook}}" target="_blank">{{profile.social.facebook}}</a>
            {{else}}
              <a href="#" id="addFacebookButton">add facebook</a>
            {{/if}}
          </dd>

          <dt>github</dt>
          <dd>
            {{#if profile.social.github}}
              <a href="{{profile.social.github}}" target="_blank">{{profile.social.github}}</a>
            {{else}}
              <a href="#" id="addGithubButton">add github</a>
            {{/if}}
          </dd>

          <dt>twitter</dt>
          <dd>
            {{#if profile.social.twitter}}
              <a href="{{profile.social.twitter}}" target="_blank">{{profile.social.twitter}}</a>
            {{else}}
              <a href="#" id="addTwitterButton">add twitter</a>
            {{/if}}
          </dd>
        </dl>
      </div>
      <div class="span6">
        {{> skills}}
      </div>
    </div>
  {{/with}}
</template>


<template name="edit">
  
    <h3>Edit my profile</h3>
    
    {{#with _currentUser}}  
      (<a href="{{pathFor 'hacker'}}">view</a>)
    {{/with}}

    <div class="row row-fluid">
      <div class="span6">

        {{#isolate}}
        {{#with currentUser}}
        <dl>
          <dt>picture</dt>
          <dd><img src="{{profile.picture}}" class="picture" alt="" /></dd>

          <dt>name</dt>
          <dd><input type="text" name="profile.name" class="autosave" value="{{profile.name}}" /></dd>

          <dt>city</dt>
          <dd><input type="text" name="profile.city" class="autosave" value="{{profile.city}}" /></dd>

          <dt>language</dt>
          <dd><input type="text" name="profile.lang" class="autosave" value="{{profile.lang}}" maxlength="2" style="width: 20px;" /></dd>

          <dt>e-mailaddresses</dt>
          <dd>
            {{#each emails}}
              <a href="mailto:{{address}}">{{address}}</a><br/>
            {{/each}}
          </dd>

          <dt>facebook</dt>
          <dd>
            {{#if profile.social.facebook}}
              <a href="{{profile.social.facebook}}" target="_blank">{{profile.social.facebook}}</a>
            {{else}}
              <a href="#" id="addFacebookButton">add facebook</a>
            {{/if}}
          </dd>

          <dt>github</dt>
          <dd>
            {{#if profile.social.github}}
              <a href="{{profile.social.github}}" target="_blank">{{profile.social.github}}</a>
            {{else}}
              <a href="#" id="addGithubButton">add github</a>
            {{/if}}
          </dd>

          <dt>twitter</dt>
          <dd>
            {{#if profile.social.twitter}}
              <a href="{{profile.social.twitter}}" target="_blank">{{profile.social.twitter}}</a>
            {{else}}
              <a href="#" id="addTwitterButton">add twitter</a>
            {{/if}}
          </dd>
        </dl>
        {{/with}}
        {{/isolate}}

      </div>
      <div class="span6">
        {{> editSkills}}
      </div>
    </div>
</template>

<template name="skills">
  <div id="skills">
    <h3>Skills</h3>
    <ul class="floating-skills">
      {{#each userSkills}}
      <li class="skill">
        {{#if favorite}}
          <span class="label label-info">
            <span class="icon-star icon-white"></span>
          </span>
        {{/if}}
        <span class="text">{{name}}</span>
      </li>
      {{/each}}
    </ul>
  </div>
</template>


<template name="editSkills">
  <div id="skills">

    <h3>Add Skills</h3>
    {{#constant}}
    <select class="chosen-select input-skills" multiple data-placeholder="Add your language skills" >
      {{#each allSkills}}
        <option {{#if hasSkill}}selected{{/if}}>{{name}}</option>
      {{/each}}
    </select>
    {{/constant}}

    <h3>My Skills</h3>
    <ul class="floating-skills">
      {{#isolate}}
      {{#each userSkills}}
      <li class="skill">
        <span class="label {{#if favorite}}label-info{{else}}rollover{{/if}} toggle-favorite">
          <span class="icon-star icon-white"></span>
        </span>
        <span class="text">{{name}}</span>
      </li>
      {{/each}}
      {{/isolate}}
    </ul>
    <div class="clear"></div>

  </div>
</template>


